<section class="vh-100">
    <div class="container-fluid h-100">
        <div class="row d-flex justify-content-center align-items-center h-100">
            <div class="col-md-9 col-lg-6 col-xl-5 text-center">
                <img src="reset_password.jpg" class="img-fluid" alt="JetWayz Reset Password Banner">
            </div>
            <div class="col-md-8 col-lg-6 col-xl-4 offset-xl-1 mt-4 login">
                <div class="login-container">
                    <div class="login-header">
                        <h2>JetWayz</h2>
                        <p>Reset Your Password</p>
                        <div class="orange-accent"></div>
                    </div>

                    <form #resetPasswordForm="ngForm" (ngSubmit)="onSubmit(resetPasswordForm)" novalidate>
                        <!-- Password input with visibility toggle -->
                        <div class="form-group">
                            <label for="password">New Password:</label>
                            <div class="password-input-wrapper">
                                <input [type]="!showPassword ? 'text' : 'password'" id="password" class="form-control"
                                    name="password" ngModel required minlength="8"
                                    pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$"
                                    #password="ngModel" placeholder="Enter your new password" />
                                <span class="password-toggle-icon" (click)="togglePasswordVisibility()">
                                    <i class="fa"
                                        [ngClass]="{'fa-eye': showPassword, 'fa-eye-slash': !showPassword}"></i>
                                </span>
                            </div>
                            <div *ngIf="password.invalid && (password.dirty || password.touched)" class="error-message">
                                <div *ngIf="password.errors?.['required']">Password is required.</div>
                                <div *ngIf="password.errors?.['minlength']">Password must be at least 8 characters long.
                                </div>
                                <div *ngIf="password.errors?.['pattern']">Password must include at least one uppercase
                                    letter, one lowercase letter, one number, and one special character.</div>
                            </div>
                        </div>

                        <!-- Confirm Password input with visibility toggle -->
                        <div class="form-group">
                            <label for="confirmPassword">Confirm Password:</label>
                            <div class="password-input-wrapper">
                                <input [type]="!showConfirmPassword ? 'text' : 'password'" id="confirmPassword"
                                    class="form-control" name="confirmPassword" ngModel required
                                    #confirmPassword="ngModel" placeholder="Confirm your new password" />
                                <span class="password-toggle-icon" (click)="toggleConfirmPasswordVisibility()">
                                    <i class="fa"
                                        [ngClass]="{'fa-eye': showConfirmPassword, 'fa-eye-slash': !showConfirmPassword}"></i>
                                </span>
                            </div>
                            <div *ngIf="confirmPassword.invalid && (confirmPassword.dirty || confirmPassword.touched)"
                                class="error-message">
                                <div *ngIf="confirmPassword.errors?.['required']">Confirm Password is required</div>
                            </div>
                            <div *ngIf="confirmPassword.touched && (password.value !== confirmPassword.value)"
                                class="error-message">
                                Passwords must match
                            </div>
                        </div>

                        <button type="submit" class="login-button"
                            [disabled]="resetPasswordForm.invalid || password.value !== confirmPassword.value">
                            Reset Password
                        </button>

                        <div class="signup-link">
                            Remember your password? <a routerLink="/login">Log In</a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</section>